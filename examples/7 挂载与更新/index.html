<!--
 * @Author: huwb 15001206751@139.com
 * @Date: 2024-11-20 17:18:24
 * @LastEditors: huwb 15001206751@139.com
 * @LastEditTime: 2024-12-06 11:06:04
 * @FilePath: \VueJS-design-and-implementation\examples\7 æŒ‚è½½ä¸æ›´æ–°\index.html
 * @Description: 
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æŒ‚è½½ä¸æ›´æ–°</title>
</head>

<body>
  <div id="app"></div>
  <input type="text" id="my-input" value="foo" />

  <script src="../../@vue/reactivity.js"></script>

  <!-- å¤šä¸ªå­èŠ‚ç‚¹æ ‡ç­¾ -->
  <!-- <script src="1.js"></script>
  <script>
    // remarkï¼šæ³¨å†Œæµè§ˆå™¨å¹³å°ä¸Šçš„æ¸²æŸ“å™¨
    const renderer = createRenderer({
      // ç”¨äºåˆ›å»ºå…ƒç´ 
      createElement(tag) {
        return document.createElement(tag)
      },
      // ç”¨äºè®¾ç½®å…ƒç´ çš„æ–‡æœ¬èŠ‚ç‚¹
      setElementText (el, text) {
        el.textContent = text
      },
      // ç”¨äºåœ¨ç»™å®šçš„ parent ä¸‹æ·»åŠ æŒ‡å®šå…ƒç´ 
      insert (el, parent, anchor = null) {
        parent.insertBefore(el, anchor)
      }
    })
    
    const vnode = {
      type: 'h1',
      children: [
        {
          type: 'u',
          children: 'hello'
        },
        {
          type: 'i',
          children: ' world'
        }
      ]
    }

    renderer.render(vnode, document.querySelector('#app'))
  </script> -->

  <!-- æ ‡ç­¾çš„ç®€å•å±æ€§ -->
  <!-- <script src="2.js"></script>
  <script>
    const vnode = {
      type: 'div',
      // ä½¿ç”¨ props æè¿°ä¸€ä¸ªå…ƒç´ çš„å±æ€§
      props: {
        id: 'foo',
        style: 'color: red'
      },
      children: [
        {
          type: 'p',
          children: 'hello'
        }
      ]
    }

    renderer.render(vnode, document.querySelector('#app'))
  </script> -->

  <!-- åºåˆ—åŒ–å¤„ç†classå±æ€§ -->
  <!-- <script src="3.js"></script>
  <script>
    const class1 = normalizeClass('foo bar')
    const class2 = normalizeClass({
      foo: true,
      bar: false
    })
    const class3 = normalizeClass([
      'foo bar',
      {
        baz: true
      }
    ])

    console.log('class1', class1)
    console.log('class2', class2)
    console.log('class3', class3)
  </script> -->

  <!-- å¸è½½æ“ä½œ -->
  <!-- <script src="4.js"></script>
  <script>
    const vnode = {
      type: 'div',
      children: 'div'
    }
    const vnode2 = {
      type: 'h1',
      children: 'h1'
    }

    renderer.render(vnode, document.querySelector('#app'))
    // renderer.render(null, document.querySelector('#app'))
    renderer.render(vnode2, document.querySelector('#app'))
  </script> -->
  <!-- æ›´æ–°æ“ä½œ todo... -->
  <!-- <script>
    const vnode = {
      type: 'div',
      children: 'div'
    }
    const vnode2 = {
      type: 'div',
      children: 'newdiv'
    }

    renderer.render(vnode, document.querySelector('#app'))
    renderer.render(vnode2, document.querySelector('#app'))
  </script> -->

  <!-- äº‹ä»¶çš„åŸºæœ¬ç»‘å®š -->
  <!-- <script src="5.js"></script>
  <script>
    const vnode = {
      type: 'p',
      props: {
        // ä½¿ç”¨ onXxx æè¿°äº‹ä»¶
        onClick: [
          // ç¬¬ä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°
          () => {
            alert('clicked 1')
          },
          // ç¬¬äºŒä¸ªäº‹ä»¶å¤„ç†å‡½æ•°
          () => {
            alert('clicked 2')
          }
        ],
        onmouseout: function () {
          console.log('ğŸš€: ~ onmouseout:', this)
        }
      },
      children: 'text'
    }

    renderer.render(vnode, document.querySelector('#app'))
  </script> -->

  <!-- äº‹ä»¶å†’æ³¡ä¸æ›´æ–°æ—¶æœºé—®é¢˜ -->
  <!-- <script src="6.js"></script>
  <script>
    const { effect, ref } = VueReactivity

    const bol = ref(false)

    effect(() => {
      const vnode = {
        type: 'div',
        props: bol.value ? {
          onClick: () => {
            alert('çˆ¶å…ƒç´  clicked')
          }
        } : {},
        children: [
          {
            type: 'p',
            props: {
              onClick: () => {
                bol.value = true
              }
            },
            children: 'text'
          }
        ]
      }
      // æ¸²æŸ“ vnode
      renderer.render(vnode, document.querySelector('#app'))
    })
  </script> -->

  <!-- æ–‡æœ¬èŠ‚ç‚¹ã€æ³¨é‡ŠèŠ‚ç‚¹å’ŒFragment(ç‰‡æ®µ) èŠ‚ç‚¹ -->
  <script src="7.js"></script>
  <script>
    const { ref, effect } = VueReactivity
    const val = ref({
      comment: 'è¿™é‡Œæ˜¯æ³¨é‡ŠèŠ‚ç‚¹',
      text: 'è¿™æ˜¯æ–‡æœ¬èŠ‚ç‚¹'
    })

    effect(() => {
      const vnode = {
        type: VNODE_TYPES.Fragment,
        children: [
          {
            type: VNODE_TYPES.Comment,
            children: val.value.comment
          },
          {
            type: VNODE_TYPES.Text,
            children: val.value.text
          }
        ]
      }

      renderer.render(vnode, document.querySelector('#app'))
    })

    setTimeout(() => {
      val.value = {
        comment: 'è¿™æ˜¯ comment èŠ‚ç‚¹',
        text: 'è¿™æ˜¯ text èŠ‚ç‚¹'
      }
    }, 1000)
  </script>
</body>

</html>