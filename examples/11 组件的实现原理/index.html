<!--
 * @Author: huwb 15001206751@139.com
 * @Date: 2024-11-20 17:18:24
 * @LastEditors: huwb 15001206751@139.com
 * @LastEditTime: 2024-12-13 11:54:55
 * @FilePath: \VueJS-design-and-implementation\examples\11 ç»„ä»¶çš„å®ç°åŸç†\index.html
 * @Description: 
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç»„ä»¶çš„å®ç°åŸç†</title>
</head>

<body>
  <div id="app"></div>

  <script src="../4 éåŸå§‹å€¼çš„å“åº”å¼æ–¹æ¡ˆ/8.js"></script>
  <script src="../5 åŸå§‹å€¼çš„å“åº”å¼æ–¹æ¡ˆ/1.js"></script>
  <!-- <script src="1.js"></script> -->
  <!-- æ™®é€šèŠ‚ç‚¹çš„æŒ‚è½½æ–¹å¼ -->
  <!-- <script>
    const vnode = {
      type: 'div',
      children: 'Hello world'
    }

    renderer.render(vnode, document.querySelector('#app'))
  </script> -->

  <!--
    type ä¸º object çš„ ä¼šåˆ«å½“åšç»„ä»¶è¿›å…¥ mountComponent æˆ– patchComponent
    dataï¼šä¸ reactive å…³è”å¹¶ä¸”åœ¨ effect é‡Œæ”¶é›†ä¾èµ–
    renderï¼šåœ¨ effect é‡Œç”¨ patch æŒ‚è½½æˆ–æ›´æ–°
    åœ¨ mountComponent å‡½æ•°æ‰§è¡Œtypeä¸º'object'å¯¹è±¡é‡Œçš„mounted
  -->
  <!-- <script>
    const MyComponent = {
      data () {
        return {
          count: 1
        }
      },
      mounted () {
        this.count = 2
        setTimeout(() => {
          this.count++
        }, 1000)
      },
      render () {
        return {
          type: 'div',
          children: `count is: ${this.count}` // åœ¨æ¸²æŸ“å‡½æ•°å†…ä½¿ç”¨ç»„ä»¶çŠ¶æ€
        }
      }
    }

    renderer.render({ type: MyComponent }, document.querySelector('#app'))
  </script> -->

  <!-- patchComponentã€åˆ›å»ºä»£ç†ä¸Šä¸‹æ–‡renderContextå¯¹è±¡ -->
  <!-- <script src="2.js"></script>
  <script>
    const MyComponent = {
      props: {
        title: String
      },
      data() {
        return {
          count: 1
        }
      },
      beforeUpdate(renderContext) {
        console.log('ğŸš€: ~ beforeUpdate ~ renderContext:', renderContext)
      },
      updated(renderContext) {
        console.log('ğŸš€: ~ updated ~ renderContext:', renderContext)
      },
      mounted() {
        console.log('ğŸš€: ~ mounted ~ renderContext:', this)
      },
      render() {
        return {
          type: 'div',
          children: `count is: ${this.title}`
        }
      }
    }

    // çˆ¶ç»„ä»¶è¦æ¸²æŸ“çš„å†…å®¹
    const vnode = {
      type: MyComponent,
      props: {
        title: 'A big Title',
        other: 'other'
      }
    }
    renderer.render(vnode, document.querySelector('#app'))
  </script> -->

  <!-- setup å¯è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œä½œä¸ºç»„ä»¶çš„render -->
  <script src="3.js"></script>
  <!-- <script>
    const MyComponent = {
      data() {
        return {
          count: 1
        }
      },
      setup() {
        return function () {
          return {
            type: 'div',
            children: `count is: ${this.count}`
          }
        }
      }
    }

    renderer.render({ type: MyComponent }, document.querySelector('#app'))
  </script> -->

  <!-- 
    setup å¯è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ç»„ä»¶çš„æ•°æ®
    emitçš„å®ç°
  -->
  <!-- <script>
    const MyComponent = {
      props: {
        title: String
      },
      setup(props, setupContext) {
        console.log('ğŸš€: ~ setup ~ props, setupContext:', props, setupContext)
        const count = ref(props.title)

        // å‘å°„ change äº‹ä»¶ï¼Œå¹¶ä¼ é€’ç»™äº‹ä»¶å¤„ç†å‡½æ•°ä¸¤ä¸ªå‚æ•°
        setupContext.emit('change', 1, 2)

        // è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­çš„æ•°æ®ä¼šæš´éœ²åˆ°æ¸²æŸ“å‡½æ•°ä¸­
        return {
          count
        }
      },
      render() {
        return {
          type: 'div',
          children: `count is: ${this.count.value}`
        }
      }
    }

    function handleChange(e, e2) {
      console.log('ğŸš€: ~ handleChange ~ e:', e, e2)
    }
    renderer.render({
      type: MyComponent,
      props: {
        title: 'A big Title',
        other: 'other',
        onChange: handleChange
      }
    }, document.querySelector('#app'))
  </script> -->


  <!-- æ’æ§½çš„å®ç° -->
  <!-- <script>
    const MyComponent = {
      data() {
        return {
          count: 100
        }
      },
      created() {
        console.log('ğŸš€: ~ created ~ this:', this.$slots)
      },
      render(e) {
        // return {
        //   type: 'div',
        //   children: `count is: ${this.count}`
        // }
        return [
          {
            type: 'header',
            children: [this.$slots.header()]
          },
          {
            type: 'body',
            children: [this.$slots.body()]
          },
          {
            type: 'footer',
            children: [this.$slots.footer()]
          }
        ]
      }
    }

    renderer.render({
      type: MyComponent,
      // ç»„ä»¶çš„ children ä¼šè¢«ç¼–è¯‘æˆä¸€ä¸ªå¯¹è±¡
      children: {
        header() {
          return { type: 'h1', children: 'æˆ‘æ˜¯æ ‡é¢˜' }
        },
        body() {
          return { type: 'section', children: 'æˆ‘æ˜¯å†…å®¹' }
        },
        footer() {
          return { type: 'p', children: 'æˆ‘æ˜¯æ³¨è„š' }
        }
      }
    }, document.querySelector('#app'))
  </script> -->

  <!-- æ³¨å†Œç”Ÿå‘½å‘¨æœŸ -->
  <script>
    const MyComponent = {
      setup() {
        onMounted(() => {
          console.log('mounted 1')
        })

        onMounted(() => {
          console.log('mounted 2')
        })

        return function () {
          return {
            type: VNODE_TYPES.Text,
            children: 'Text'
          }
        }
      }
    }

    renderer.render({ type: MyComponent }, document.querySelector('#app'))
  </script>
</body>

</html>